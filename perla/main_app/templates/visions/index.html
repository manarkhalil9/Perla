{% extends 'base.html' %}
{% load static %}

{% block content %}

<h1>Your Visions</h1>

<div class="row">
  {% for vision in visions %}
    <div class="col s12 m6 l4"> <div class="card hoverable"> <a href="{% url 'vision_detail' vision.id %}" class="black-text">
          
          {% if vision.image %}
            <div class="card-image">
              <img src="{% static vision.image|cut:'main_app/static/' %}" alt="{{ vision.name }}">
            </div>
          {% endif %}

          <div class="card-content">
            <span class="card-title">{{ vision.name }}</span>
            
            {% if vision.description %}
              <p class="truncate">{{ vision.description }}</p> {% endif %}
            
            <p><small>Target: {{ vision.get_target_month_display }}</small></p>
          </div>
        </a>
      </div>
    </div>
  {% empty %}
    <div class="col s12">
      <p>No visions found. Why not <a href="{% url 'vision_create' %}">create one?</a></p>
    </div>
  {% endfor %}
</div>

<!-- Materialize JS initialization -->
<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Initialize all select elements
    var selectEls = document.querySelectorAll('select');
    M.FormSelect.init(selectEls);
  });
</script>

{% endblock %}
